"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9914],{5962:function(le,D,e){e.d(D,{Z:function(){return i}});var p=e(56453),u=e(63313),s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"},m=s,L=e(17536),f=function(O,x){return u.createElement(L.Z,(0,p.Z)((0,p.Z)({},O),{},{ref:x,icon:m}))};f.displayName="DeleteOutlined";var i=u.forwardRef(f)},62198:function(le,D,e){e.d(D,{Z:function(){return i}});var p=e(56453),u=e(63313),s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494zM504 618H320c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zM312 490v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H320c-4.4 0-8 3.6-8 8z"}}]},name:"file-text",theme:"outlined"},m=s,L=e(17536),f=function(O,x){return u.createElement(L.Z,(0,p.Z)((0,p.Z)({},O),{},{ref:x,icon:m}))};f.displayName="FileTextOutlined";var i=u.forwardRef(f)},35316:function(le,D,e){e.d(D,{Z:function(){return i}});var p=e(56453),u=e(63313),s={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 1024c-69.1 0-136.2-13.5-199.3-40.2C251.7 958 197 921 150 874c-47-47-84-101.7-109.8-162.7C13.5 648.2 0 581.1 0 512c0-19.9 16.1-36 36-36s36 16.1 36 36c0 59.4 11.6 117 34.6 171.3 22.2 52.4 53.9 99.5 94.3 139.9 40.4 40.4 87.5 72.2 139.9 94.3C395 940.4 452.6 952 512 952c59.4 0 117-11.6 171.3-34.6 52.4-22.2 99.5-53.9 139.9-94.3 40.4-40.4 72.2-87.5 94.3-139.9C940.4 629 952 571.4 952 512c0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.2C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3s-13.5 136.2-40.2 199.3C958 772.3 921 827 874 874c-47 47-101.8 83.9-162.7 109.7-63.1 26.8-130.2 40.3-199.3 40.3z"}}]},name:"loading-3-quarters",theme:"outlined"},m=s,L=e(17536),f=function(O,x){return u.createElement(L.Z,(0,p.Z)((0,p.Z)({},O),{},{ref:x,icon:m}))};f.displayName="Loading3QuartersOutlined";var i=u.forwardRef(f)},99071:function(le,D,e){var p=e(46686),u=e.n(p),s=e(63313),m=e.n(s),L=e(61761),f=e(48388);D.Z=function(i,y){var O=(0,s.useState)(),x=u()(O,2),k=x[0],E=x[1];return(0,L.Z)(i,function(S){var c=S.target;c.classList.contains("ant-table-wrapper")||(c=S.target.querySelector(".ant-table-wrapper")),E((0,f.W9)({extraHeight:y,target:c}))}),k}},30366:function(le,D,e){e.r(D),e.d(D,{default:function(){return $}});var p=e(94434),u=e.n(p),s=e(46686),m=e.n(s),L=e(30279),f=e.n(L),i=e(63313),y=e(87670),O=e(30314),x=e(65646),k=e(96384),E=e(61135),S=e(4352),c=e(59225),ie=e(44514),me=e(61685),Q=e(62198),r=e(56453),ve={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M304 280h56c4.4 0 8-3.6 8-8 0-28.3 5.9-53.2 17.1-73.5 10.6-19.4 26-34.8 45.4-45.4C450.9 142 475.7 136 504 136h16c28.3 0 53.2 5.9 73.5 17.1 19.4 10.6 34.8 26 45.4 45.4C650 218.9 656 243.7 656 272c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8 0-40-8.8-76.7-25.9-108.1a184.31 184.31 0 00-74-74C596.7 72.8 560 64 520 64h-16c-40 0-76.7 8.8-108.1 25.9a184.31 184.31 0 00-74 74C304.8 195.3 296 232 296 272c0 4.4 3.6 8 8 8z"}},{tag:"path",attrs:{d:"M940 512H792V412c76.8 0 139-62.2 139-139 0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8a63 63 0 01-63 63H232a63 63 0 01-63-63c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8 0 76.8 62.2 139 139 139v100H84c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h148v96c0 6.5.2 13 .7 19.3C164.1 728.6 116 796.7 116 876c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8 0-44.2 23.9-82.9 59.6-103.7a273 273 0 0022.7 49c24.3 41.5 59 76.2 100.5 100.5S460.5 960 512 960s99.8-13.9 141.3-38.2a281.38 281.38 0 00123.2-149.5A120 120 0 01836 876c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8 0-79.3-48.1-147.4-116.7-176.7.4-6.4.7-12.8.7-19.3v-96h148c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM716 680c0 36.8-9.7 72-27.8 102.9-17.7 30.3-43 55.6-73.3 73.3C584 874.3 548.8 884 512 884s-72-9.7-102.9-27.8c-30.3-17.7-55.6-43-73.3-73.3A202.75 202.75 0 01308 680V412h408v268z"}}]},name:"bug",theme:"outlined"},G=ve,R=e(17536),j=function(C,K){return i.createElement(R.Z,(0,r.Z)((0,r.Z)({},C),{},{ref:K,icon:G}))};j.displayName="BugOutlined";var H=i.forwardRef(j),F=e(5962),J={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 256H736v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zm-200 0H360v-72h304v72z"}}]},name:"delete",theme:"filled"},ue=J,Y=function(C,K){return i.createElement(R.Z,(0,r.Z)((0,r.Z)({},C),{},{ref:K,icon:ue}))};Y.displayName="DeleteFilled";var re=i.forwardRef(Y),A=e(41601),X=e(11168),I=e(73835),oe=e(28533),fe=e(73119),w=e(66255),de=e(79894),z=e(65731),B=e(99071),n=e(11527),W=y.Z.Text,q=O.Z.Search,g;(function(o){o[o.\u5B89\u88C5\u4E2D=0]="\u5B89\u88C5\u4E2D",o[o.\u5DF2\u5B89\u88C5=1]="\u5DF2\u5B89\u88C5",o[o.\u5B89\u88C5\u5931\u8D25=2]="\u5B89\u88C5\u5931\u8D25",o[o.\u5220\u9664\u4E2D=3]="\u5220\u9664\u4E2D",o[o.\u5DF2\u5220\u9664=4]="\u5DF2\u5220\u9664",o[o.\u5220\u9664\u5931\u8D25=5]="\u5220\u9664\u5931\u8D25"})(g||(g={}));var V;(function(o){o[o.processing=0]="processing",o[o.success=1]="success",o[o.error=2]="error"})(V||(V={}));var ee=function(){var C=(0,z.bx)(),K=C.headerStyle,se=C.isPhone,N=C.socketMessage,M=[{title:"\u5E8F\u53F7",align:"center",width:50,render:function(t,a,l){return(0,n.jsxs)("span",{style:{cursor:"text"},children:[l+1," "]})}},{title:"\u540D\u79F0",dataIndex:"name",key:"name",align:"center"},{title:"\u72B6\u6001",key:"status",dataIndex:"status",align:"center",render:function(t,a,l){return(0,n.jsx)(x.Z,{size:"middle",style:{cursor:"text"},children:(0,n.jsx)(k.Z,{color:V[a.status%3],style:{marginRight:0},children:g[a.status]})})}},{title:"\u5907\u6CE8",dataIndex:"remark",key:"remark",align:"center"},{title:"\u521B\u5EFA\u65F6\u95F4",key:"timestamp",dataIndex:"timestamp",align:"center",render:function(t,a){var l=navigator.language||navigator.languages[0],d=a.createdAt||a.timestamp,h=new Date(d).toLocaleString(l,{hour12:!1}).replace(" 24:"," 00:");return(0,n.jsx)(E.Z,{placement:"topLeft",title:h,trigger:["hover","click"],children:(0,n.jsx)("span",{children:h})})}},{title:"\u64CD\u4F5C",key:"action",align:"center",render:function(t,a,l){var d=!se;return(0,n.jsxs)(x.Z,{size:"middle",children:[(0,n.jsx)(E.Z,{title:d?"\u65E5\u5FD7":"",children:(0,n.jsx)("a",{onClick:function(){$e(f()(f()({},a),{},{timestamp:Date.now()}))},children:(0,n.jsx)(Q.Z,{})})}),a.status!==g.\u5B89\u88C5\u4E2D&&a.status!==g.\u5220\u9664\u4E2D&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(E.Z,{title:d?"\u91CD\u65B0\u5B89\u88C5":"",children:(0,n.jsx)("a",{onClick:function(){return en(a,l)},children:(0,n.jsx)(H,{})})}),(0,n.jsx)(E.Z,{title:d?"\u5220\u9664":"",children:(0,n.jsx)("a",{onClick:function(){return Te(a,l)},children:(0,n.jsx)(F.Z,{})})}),(0,n.jsx)(E.Z,{title:d?"\u5F3A\u5236\u5220\u9664":"",children:(0,n.jsx)("a",{onClick:function(){return Te(a,l,!0)},children:(0,n.jsx)(re,{})})})]})]})}}],Z=(0,i.useState)([]),P=m()(Z,2),_=P[0],U=P[1],_e=(0,i.useState)(!0),Oe=m()(_e,2),xe=Oe[0],De=Oe[1],Ue=(0,i.useState)(!1),Be=m()(Ue,2),be=Be[0],pe=Be[1],Qe=(0,i.useState)(),Me=m()(Qe,2),He=Me[0],Pe=Me[1],ze=(0,i.useState)([]),Le=m()(ze,2),ne=Le[0],he=Le[1],Ve=(0,i.useState)(""),ye=m()(Ve,2),je=ye[0],Ne=ye[1],ke=(0,i.useState)(),Fe=m()(ke,2),te=Fe[0],$e=Fe[1],Ge=(0,i.useState)(!1),Ze=m()(Ge,2),Je=Ze[0],Se=Ze[1],Ye=(0,i.useState)("nodejs"),Ae=m()(Ye,2),Ee=Ae[0],Xe=Ae[1],Ie=(0,i.useRef)(),we=(0,B.Z)(Ie,59),Ce=function(){De(!0),I.W.get("".concat(A.Z.apiPrefix,"dependencies?searchValue=").concat(je,"&type=").concat(Ee)).then(function(t){var a=t.code,l=t.data;a===200&&U(l)}).finally(function(){return De(!1)})},qe=function(){Pe(null),pe(!0)},cn=function(t,a){Pe(t),pe(!0)},Te=function(t,a){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;S.Z.confirm({title:"\u786E\u8BA4\u5220\u9664",content:(0,n.jsxs)(n.Fragment,{children:["\u786E\u8BA4\u5220\u9664\u4F9D\u8D56"," ",(0,n.jsx)(W,{style:{wordBreak:"break-all"},type:"warning",children:t.name})," ","\u5417"]}),onOk:function(){I.W.delete("".concat(A.Z.apiPrefix,"dependencies").concat(l?"/force":""),{data:[t.id]}).then(function(h){var T=h.code,ae=h.data;if(T===200&&l){var ce=_.findIndex(function(ge){return ge.id===ae.data[0].id});if(ce!==-1){var b=u()(_);b.splice(ce,1),U(b)}}})},onCancel:function(){console.log("Cancel")}})},en=function(t,a){S.Z.confirm({title:"\u786E\u8BA4\u91CD\u65B0\u5B89\u88C5",content:(0,n.jsxs)(n.Fragment,{children:["\u786E\u8BA4\u91CD\u65B0\u5B89\u88C5"," ",(0,n.jsx)(W,{style:{wordBreak:"break-all"},type:"warning",children:t.name})," ","\u5417"]}),onOk:function(){I.W.put("".concat(A.Z.apiPrefix,"dependencies/reinstall"),{data:[t.id]}).then(function(d){var h=d.code,T=d.data;h===200&&Re(T[0])})},onCancel:function(){console.log("Cancel")}})},nn=function(t){pe(!1),t&&Re(t)},Re=function(t){var a=u()(_);if(Array.isArray(t))a.push.apply(a,u()(t));else{var l=_.findIndex(function(d){return d.id===t.id});l!==-1&&a.splice(l,1,f()({},t))}U(a)},tn=function(t){he(t)},an={selectedRowKeys:ne,onChange:tn},We=function(t){var a=t?"/force":"";S.Z.confirm({title:"\u786E\u8BA4\u5220\u9664",content:(0,n.jsx)(n.Fragment,{children:"\u786E\u8BA4\u5220\u9664\u9009\u4E2D\u7684\u4F9D\u8D56\u5417"}),onOk:function(){I.W.delete("".concat(A.Z.apiPrefix,"dependencies").concat(a),{data:ne}).then(function(d){var h=d.code,T=d.data;h===200&&(he([]),Ce())})},onCancel:function(){console.log("Cancel")}})},ln=function(){S.Z.confirm({title:"\u786E\u8BA4\u91CD\u65B0\u5B89\u88C5",content:(0,n.jsx)(n.Fragment,{children:"\u786E\u8BA4\u91CD\u65B0\u5B89\u88C5\u9009\u4E2D\u7684\u4F9D\u8D56\u5417"}),onOk:function(){I.W.put("".concat(A.Z.apiPrefix,"dependencies/reinstall"),{data:ne}).then(function(a){var l=a.code,d=a.data;l===200&&(he([]),Ce())})},onCancel:function(){console.log("Cancel")}})},un=function(t){I.W.get("".concat(A.Z.apiPrefix,"dependencies/").concat(t.id)).then(function(a){var l=a.code,d=a.data;if(l===200){var h=_.findIndex(function(ae){return ae.id===t.id}),T=u()(_);h!==-1&&(T.splice(h,1,f()(f()({},t),d)),U(T))}}).finally(function(){return De(!1)})},rn=function(t){Ne(t.trim())};(0,i.useEffect)(function(){Ce()},[je,Ee]),(0,i.useEffect)(function(){te&&(localStorage.setItem("logDependence",te.id),Se(!0))},[te]),(0,i.useEffect)(function(){if(!!N){var v=N.type,t=N.message,a=N.references;if(v==="installDependence"&&t.includes("\u7ED3\u675F\u65F6\u95F4")&&a.length>0){var l;t.includes("\u5B89\u88C5")?l=t.includes("\u6210\u529F")?g.\u5DF2\u5B89\u88C5:g.\u5B89\u88C5\u5931\u8D25:l=t.includes("\u6210\u529F")?g.\u5DF2\u5220\u9664:g.\u5220\u9664\u5931\u8D25;for(var d=u()(_),h=function(ce){var b=_.findIndex(function(ge){return ge.id===a[ce]});b!==-1&&d.splice(b,1,f()(f()({},_[b]),{},{status:l}))},T=0;T<a.length;T++)h(T);U(d),l===g.\u5DF2\u5220\u9664&&setTimeout(function(){for(var ae=u()(_),ce=function(dn){var Ke=_.findIndex(function(sn){return sn.id===a[dn]});Ke!==-1&&ae.splice(Ke,1)},b=0;b<a.length;b++)ce(b);U(ae)},5e3)}}},[N]);var on=function(t){he([]),Xe(t)};return(0,n.jsxs)(X.ZP,{className:"ql-container-wrapper dependence-wrapper ql-container-wrapper-has-tab",title:"\u4F9D\u8D56\u7BA1\u7406",extra:[(0,n.jsx)(q,{placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0",style:{width:"auto"},enterButton:!0,loading:xe,onSearch:rn}),(0,n.jsx)(c.Z,{type:"primary",onClick:function(){return qe()},children:"\u65B0\u5EFA\u4F9D\u8D56"},"2")],header:{style:K},children:[(0,n.jsx)(ie.Z,{defaultActiveKey:"nodejs",size:"small",tabPosition:"top",onChange:on,items:[{key:"nodejs",label:"NodeJs"},{key:"python3",label:"Python3"},{key:"linux",label:"Linux"}]}),(0,n.jsxs)("div",{ref:Ie,children:[ne.length>0&&(0,n.jsxs)("div",{style:{marginBottom:16},children:[(0,n.jsx)(c.Z,{type:"primary",style:{marginBottom:5,marginLeft:8},onClick:function(){return ln()},children:"\u6279\u91CF\u5B89\u88C5"}),(0,n.jsx)(c.Z,{type:"primary",style:{marginBottom:5,marginLeft:8},onClick:function(){return We(!1)},children:"\u6279\u91CF\u5220\u9664"}),(0,n.jsx)(c.Z,{type:"primary",style:{marginBottom:5,marginLeft:8},onClick:function(){return We(!0)},children:"\u6279\u91CF\u5F3A\u5236\u5220\u9664"}),(0,n.jsxs)("span",{style:{marginLeft:8},children:["\u5DF2\u9009\u62E9",(0,n.jsx)("a",{children:ne==null?void 0:ne.length}),"\u9879"]})]}),(0,n.jsx)(fe.W,{backend:w.PD,children:(0,n.jsx)(me.Z,{columns:M,rowSelection:an,pagination:!1,dataSource:_,rowKey:"id",size:"middle",scroll:{x:768,y:we},loading:xe})})]}),(0,n.jsx)(oe.default,{visible:be,handleCancel:nn,dependence:He,defaultType:Ee}),(0,n.jsx)(de.default,{visible:Je,handleCancel:function(t){if(Se(!1),t){var a=_.findIndex(function(d){return d.id===te.id}),l=u()(_);a!==-1&&(l.splice(a,1),U(l))}else u()(_).map(function(d){return d.id}).includes(te.id)&&un(te)},socketMessage:N,dependence:te})]})},$=ee},79894:function(le,D,e){e.r(D);var p=e(46686),u=e.n(p),s=e(63313),m=e.n(s),L=e(4352),f=e(59225),i=e(73835),y=e(41601),O=e(35316),x=e(9734),k=e(7098),E=e(42881),S=e.n(E),c=e(11527),ie=function(Q){var r=Q.dependence,ve=Q.handleCancel,G=Q.visible,R=Q.socketMessage,j=(0,s.useState)(""),H=u()(j,2),F=H[0],J=H[1],ue=(0,s.useState)(!0),Y=u()(ue,2),re=Y[0],A=Y[1],X=(0,s.useState)(!1),I=u()(X,2),oe=I[0],fe=I[1],w=(0,s.useState)(!0),de=u()(w,2),z=de[0],B=de[1],n=(0,s.useState)(!1),W=u()(n,2),q=W[0],g=W[1],V=(0,s.useState)(!1),ee=u()(V,2),$=ee[0],o=ee[1],C=function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;localStorage.removeItem("logDependence"),ve(P)},K=function(){return(0,c.jsxs)(c.Fragment,{children:[re&&(0,c.jsx)(O.Z,{spin:!0}),!re&&(0,c.jsx)(x.Z,{}),(0,c.jsxs)("span",{style:{marginLeft:5},children:["\u65E5\u5FD7 - ",r&&r.name]})," "]})},se=function(){B(!0),i.W.get("".concat(y.Z.apiPrefix,"dependencies/").concat(r.id)).then(function(P){var _=P.code,U=P.data;if(_===200&&localStorage.getItem("logDependence")===String(r.id)){var _e=(U.log||[]).join("");J(_e),A(!_e.includes("\u7ED3\u675F\u65F6\u95F4")),g(_e.includes("\u5220\u9664\u5931\u8D25"))}}).finally(function(){B(!1)})},N=function(){o(!0),i.W.delete("".concat(y.Z.apiPrefix,"dependencies/force"),{data:[r.id]}).then(function(P){var _=P.code,U=P.data;_===200&&C(!0)}).finally(function(){o(!1)})},M=function(){q?N():C()};return(0,s.useEffect)(function(){r&&se()},[r]),(0,s.useEffect)(function(){if(!(!R||!r)){var Z=R.type,P=R.message,_=R.references;Z==="installDependence"&&_.length>0&&_.includes(r.id)&&(P.includes("\u7ED3\u675F\u65F6\u95F4")&&(A(!1),g(P.includes("\u5220\u9664\u5931\u8D25"))),J("".concat(F).concat(P)))}},[R]),(0,s.useEffect)(function(){fe(document.body.clientWidth<768)},[]),(0,c.jsx)(L.Z,{title:K(),open:G,centered:!0,className:"log-modal",bodyStyle:{overflowY:"auto",maxHeight:"calc(70vh - var(--vh-offset, 0px))",minHeight:"300px"},forceRender:!0,onOk:function(){return C()},onCancel:function(){return C()},footer:[(0,c.jsx)(f.Z,{type:"primary",onClick:M,loading:$,children:q?"\u5F3A\u5236\u5220\u9664":"\u77E5\u9053\u4E86"})],children:z?(0,c.jsx)(k.Z,{}):(0,c.jsx)("pre",{style:oe?{fontFamily:"Source Code Pro",width:375,zoom:.83}:{},children:(0,c.jsx)(S(),{children:F})})})};D.default=ie},28533:function(le,D,e){e.r(D);var p=e(35290),u=e.n(p),s=e(30279),m=e.n(s),L=e(411),f=e.n(L),i=e(46686),y=e.n(i),O=e(63313),x=e.n(O),k=e(61839),E=e(71976),S=e(4352),c=e(28666),ie=e(30314),me=e(73835),Q=e(41601),r=e(11527),ve=k.Z.Option,G;(function(j){j[j.nodejs=0]="nodejs",j[j.python3=1]="python3",j[j.linux=2]="linux"})(G||(G={}));var R=function(H){var F=H.dependence,J=H.handleCancel,ue=H.visible,Y=H.defaultType,re=E.Z.useForm(),A=y()(re,1),X=A[0],I=(0,O.useState)(!1),oe=y()(I,2),fe=oe[0],w=oe[1],de=function(){var z=f()(u()().mark(function B(n){var W,q,g,V,ee,$,o,C,K,se;return u()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return w(!0),W=n.name,q=n.split,g=n.type,V=n.remark,ee=F?"put":"post",F?$=m()(m()({},n),{},{id:F.id}):q==="1"?(o=W.includes("&")?"&":`
`,$=W.split(o).map(function(Z){return{name:Z,type:g,remark:V}})):$=[{name:W,type:g,remark:V}],M.prev=4,M.next=7,me.W[ee]("".concat(Q.Z.apiPrefix,"dependencies"),{data:$});case 7:C=M.sent,K=C.code,se=C.data,K===200&&J(se),w(!1),M.next=17;break;case 14:M.prev=14,M.t0=M.catch(4),w(!1);case 17:case"end":return M.stop()}},B,null,[[4,14]])}));return function(n){return z.apply(this,arguments)}}();return(0,O.useEffect)(function(){X.resetFields()},[F,ue]),(0,r.jsx)(S.Z,{title:F?"\u7F16\u8F91\u4F9D\u8D56":"\u65B0\u5EFA\u4F9D\u8D56",open:ue,forceRender:!0,centered:!0,maskClosable:!1,onOk:function(){X.validateFields().then(function(B){de(B)}).catch(function(B){console.log("Validate Failed:",B)})},onCancel:function(){return J()},confirmLoading:fe,children:(0,r.jsxs)(E.Z,{form:X,layout:"vertical",name:"dependence_modal",initialValues:F,children:[(0,r.jsx)(E.Z.Item,{name:"type",label:"\u4F9D\u8D56\u7C7B\u578B",initialValue:G[Y],children:(0,r.jsx)(k.Z,{children:Q.Z.dependenceTypes.map(function(z,B){return(0,r.jsx)(ve,{value:B,children:z},B)})})}),!F&&(0,r.jsx)(E.Z.Item,{name:"split",label:"\u81EA\u52A8\u62C6\u5206",initialValue:"0",tooltip:"\u591A\u4E2A\u4F9D\u8D56\u662F\u5426\u6362\u884C\u5206\u5272",children:(0,r.jsxs)(c.ZP.Group,{children:[(0,r.jsx)(c.ZP,{value:"1",children:"\u662F"}),(0,r.jsx)(c.ZP,{value:"0",children:"\u5426"})]})}),(0,r.jsx)(E.Z.Item,{name:"name",label:"\u540D\u79F0",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u4F9D\u8D56\u540D\u79F0",whitespace:!0}],children:(0,r.jsx)(ie.Z.TextArea,{rows:4,autoSize:!0,placeholder:"\u8BF7\u8F93\u5165\u4F9D\u8D56\u540D\u79F0"})}),(0,r.jsx)(E.Z.Item,{name:"remark",label:"\u5907\u6CE8",children:(0,r.jsx)(ie.Z,{placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8"})})]})})};D.default=R}}]);
