"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5373],{5373:function(ae,I,e){e.r(I);var B=e(30279),E=e.n(B),v=e(46686),s=e.n(v),l=e(63313),$=e.n(l),p=e(61839),K=e(42194),D=e(21688),P=e(59225),d=e(73835),f=e(41601),A=e(90138),u=e(93113),h=e(48449),g=e(39830),o=e(86754),b=e(48388),n=e(11527),M=p.Z.Option,a={".py":"python",".js":"javascript",".sh":"shell",".ts":"typescript"},m={python:".py",javascript:".js",shell:".sh",typescript:".ts"},_=function(t){var i=t.treeData,T=t.currentNode,j=t.content,w=t.handleCancel,W=t.visible,Z=t.socketMessage,Q=(0,l.useState)(""),C=s()(Q,2),z=C[0],R=C[1],q=(0,l.useState)("javascript"),F=s()(q,2),N=F[0],x=F[1],V=(0,l.useState)(),oe=s()(V,2),U=oe[0],H=oe[1],G=(0,l.useState)(""),re=s()(G,2),le=re[0],se=re[1],X=(0,l.useState)(!1),ue=s()(X,2),Oe=ue[0],ie=ue[1],S=(0,l.useState)(!1),de=s()(S,2),me=de[0],ce=de[1],De=(0,l.useState)(""),J=s()(De,2),ee=J[0],te=J[1],ne=(0,o.F)(),Pe=ne.theme,Y=(0,l.useRef)(null),ge=(0,l.useState)(!1),Ee=s()(ge,2),ve=Ee[0],k=Ee[1],_e=(0,l.useState)(null),pe=s()(_e,2),fe=pe[0],Ce=pe[1],Be=function(){w()},Le=function(r,O){if(!(O.key===le||!r)&&O.type!=="directory"){var y=a[r.slice(-3)]||"";H(O),x(y),Ie(O),se(O.key)}},Ie=function(r){d.W.get("".concat(f.Z.apiPrefix,"scripts/").concat(r.title,"?path=").concat(r.parent||"")).then(function(O){var y=O.code,Te=O.data;y===200&&R(Te)})},he=function(){te("");var r=Y.current.getValue().replace(/\r\n/g,`
`);d.W.put("".concat(f.Z.apiPrefix,"scripts/run"),{data:{filename:U.title,path:U.parent||"",content:r}}).then(function(O){var y=O.code,Te=O.data;y===200&&(k(!0),Ce(Te))})},Me=function(){!U||!U.title||!fe||d.W.put("".concat(f.Z.apiPrefix,"scripts/stop"),{data:{filename:U.title,path:U.parent||"",pid:fe}}).then(function(r){var O=r.code,y=r.data;O===200&&k(!1)})};return(0,l.useEffect)(function(){if(!!Z){var c=Z.type,r=Z.message,O=Z.references;c==="manuallyRunScript"&&((0,b.x$)(r)&&setTimeout(function(){k(!1)},300),ee&&(r=`
`.concat(r)),te("".concat(ee).concat(r)))}},[Z]),(0,l.useEffect)(function(){if(te(""),T){H(T),R(j),se(T.key);var c=a[T.title.slice(-3)]||"";x(c)}},[j,T]),(0,n.jsxs)(K.Z,{className:"edit-modal",closable:!1,title:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(D.Z,{treeExpandAction:"click",style:{marginRight:8,width:150},value:le,dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:i,placeholder:"\u8BF7\u9009\u62E9\u811A\u672C\u6587\u4EF6",fieldNames:{value:"key",label:"title"},showSearch:!0,onSelect:Le}),(0,n.jsxs)(p.Z,{value:N,style:{width:110,marginRight:8},onChange:function(r){x(r)},children:[(0,n.jsx)(M,{value:"javascript",children:"javascript"}),(0,n.jsx)(M,{value:"typescript",children:"typescript"}),(0,n.jsx)(M,{value:"shell",children:"shell"}),(0,n.jsx)(M,{value:"python",children:"python"})]}),(0,n.jsx)(P.Z,{type:"primary",style:{marginRight:8},onClick:ve?Me:he,children:ve?"\u505C\u6B62":"\u8FD0\u884C"}),(0,n.jsx)(P.Z,{type:"primary",style:{marginRight:8},onClick:function(){te("")},children:"\u6E05\u7A7A\u65E5\u5FD7"}),(0,n.jsx)(P.Z,{type:"primary",style:{marginRight:8},onClick:function(){ce(!0)},children:"\u8BBE\u7F6E"}),(0,n.jsx)(P.Z,{type:"primary",style:{marginRight:8},onClick:function(){ie(!0)},children:"\u4FDD\u5B58"}),(0,n.jsx)(P.Z,{type:"primary",style:{marginRight:8},onClick:function(){Me(),w()},children:"\u9000\u51FA"})]}),width:"100%",headerStyle:{padding:"11px 24px"},onClose:Be,open:W,children:[(0,n.jsxs)(A.Z,{split:"vertical",minSize:200,defaultSize:"50%",style:{height:"calc(100vh - 55px)"},children:[(0,n.jsx)(u.ZP,{language:N,value:z,theme:Pe,options:{fontSize:12,minimap:{enabled:!1},lineNumbersMinChars:3,glyphMargin:!1},onMount:function(r){Y.current=r}}),(0,n.jsx)("pre",{style:{height:"100%",padding:"0 15px"},children:ee})]}),(0,n.jsx)(h.default,{visible:Oe,handleCancel:function(){ie(!1)},file:E()({content:Y.current&&Y.current.getValue().replace(/\r\n/g,`
`)},U)}),(0,n.jsx)(g.default,{visible:me,handleCancel:function(){ce(!1)}})]})};I.default=_},48449:function(ae,I,e){e.r(I);var B=e(35290),E=e.n(B),v=e(30279),s=e.n(v),l=e(411),$=e.n(l),p=e(46686),K=e.n(p),D=e(63313),P=e.n(D),d=e(71976),f=e(63533),A=e(4352),u=e(30314),h=e(73835),g=e(41601),o=e(11527),b=function(M){var a=M.file,m=M.handleCancel,_=M.visible,L=d.Z.useForm(),t=K()(L,1),i=t[0],T=(0,D.useState)(!1),j=K()(T,2),w=j[0],W=j[1],Z=function(){var Q=$()(E()().mark(function C(z){var R;return E()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:W(!0),R=s()(s()(s()({},a),z),{},{originFilename:a.title}),h.W.post("".concat(g.Z.apiPrefix,"scripts"),{data:R}).then(function(N){var x=N.code,V=N.data;x===200&&(f.ZP.success("\u4FDD\u5B58\u6587\u4EF6\u6210\u529F"),m(V)),W(!1)});case 3:case"end":return F.stop()}},C)}));return function(z){return Q.apply(this,arguments)}}();return(0,D.useEffect)(function(){i.resetFields(),W(!1)},[a,_]),(0,o.jsx)(A.Z,{title:"\u4FDD\u5B58\u6587\u4EF6",open:_,forceRender:!0,centered:!0,maskClosable:!1,onOk:function(){i.validateFields().then(function(C){Z(C)}).catch(function(C){console.log("Validate Failed:",C)})},onCancel:function(){return m()},confirmLoading:w,children:(0,o.jsxs)(d.Z,{form:i,layout:"vertical",name:"script_modal",initialValues:{filename:a==null?void 0:a.title,path:(a==null?void 0:a.parent)||""},children:[(0,o.jsx)(d.Z.Item,{name:"filename",label:"\u6587\u4EF6\u540D",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6587\u4EF6\u540D"}],children:(0,o.jsx)(u.Z,{placeholder:"\u8BF7\u8F93\u5165\u6587\u4EF6\u540D"})}),(0,o.jsx)(d.Z.Item,{name:"path",label:"\u4FDD\u5B58\u76EE\u5F55",children:(0,o.jsx)(u.Z,{placeholder:"\u8BF7\u8F93\u5165\u4FDD\u5B58\u76EE\u5F55\uFF0C\u9ED8\u8BA4scripts\u76EE\u5F55"})})]})})};I.default=b},39830:function(ae,I,e){e.r(I);var B=e(35290),E=e.n(B),v=e(30279),s=e.n(v),l=e(411),$=e.n(l),p=e(46686),K=e.n(p),D=e(63313),P=e.n(D),d=e(71976),f=e(63533),A=e(4352),u=e(30314),h=e(73835),g=e(41601),o=e(11527),b=function(M){var a=M.file,m=M.handleCancel,_=M.visible,L=d.Z.useForm(),t=K()(L,1),i=t[0],T=(0,D.useState)(!1),j=K()(T,2),w=j[0],W=j[1],Z=function(){var Q=$()(E()().mark(function C(z){var R;return E()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:W(!0),R=s()(s()({},a),z),h.W.post("".concat(g.Z.apiPrefix,"scripts"),{data:R}).then(function(N){var x=N.code,V=N.data;x===200&&(f.ZP.success("\u4FDD\u5B58\u6587\u4EF6\u6210\u529F"),m(V)),W(!1)});case 3:case"end":return F.stop()}},C)}));return function(z){return Q.apply(this,arguments)}}();return(0,D.useEffect)(function(){i.resetFields(),W(!1)},[a,_]),(0,o.jsx)(A.Z,{title:"\u8FD0\u884C\u8BBE\u7F6E",open:_,forceRender:!0,centered:!0,onCancel:function(){return m()},children:(0,o.jsx)(d.Z,{form:i,layout:"vertical",name:"setting_modal",initialValues:a,children:(0,o.jsx)(d.Z.Item,{name:"filename",label:"\u5F85\u5F00\u53D1",rules:[{required:!0,message:"\u5F85\u5F00\u53D1"}],children:(0,o.jsx)(u.Z,{placeholder:"\u5F85\u5F00\u53D1"})})})})};I.default=b},86754:function(ae,I,e){e.d(I,{F:function(){return p},e:function(){return $}});var B=e(46686),E=e.n(B),v=e(63313),s=e.n(v),l=e(48388),$=function(){var D=(0,v.useState)("100%"),P=E()(D,2),d=P[0],f=P[1],A=(0,v.useState)(0),u=E()(A,2),h=u[0],g=u[1],o=(0,v.useState)(-72),b=E()(o,2),n=b[0],M=b[1],a=(0,v.useState)(!1),m=E()(a,2),_=m[0],L=m[1],t=(0,v.useMemo)(function(){return(0,l.ZP)()},[]),i=t.platform;return(0,v.useEffect)(function(){i==="mobile"&&document.body.offsetWidth<768?(f("auto"),g(0),M(0),L(!0)):(f("100%"),g(0),M(-72),L(!1))},[]),{headerStyle:{padding:"4px 16px 4px 15px",position:"sticky",top:0,left:0,zIndex:20,marginTop:n,width:d,marginLeft:h},isPhone:_}},p=function(){var D=(0,v.useState)(),P=E()(D,2),d=P[0],f=P[1],A=function(){var h=window.matchMedia("(prefers-color-scheme: dark)"),g=localStorage.getItem("qinglong_dark_theme"),o=h.matches&&g!=="light"||g==="dark";f(o?"vs-dark":"vs")};return(0,v.useEffect)(function(){var u=window.matchMedia("(prefers-color-scheme: dark)"),h=localStorage.getItem("qinglong_dark_theme"),g=u.matches&&h!=="light"||h==="dark";f(g?"vs-dark":"vs");var o=function(n){(h==="auto"||!h)&&(n.matches?f("vs-dark"):f("vs"))};typeof u.addEventListener=="function"?u.addEventListener("change",o):typeof u.addListener=="function"&&u.addListener(o)},[]),{theme:d,reloadTheme:A}}},61839:function(ae,I,e){var B=e(24255),E=e(15882),v=e(84875),s=e.n(v),l=e(7032),$=e(33759),p=e(63313),K=e.n(p),D=e(47295),P=e(57746),d=e(84858),f=e(6633),A=e(76093),u=e(73442),h=e(82938),g=e(86628),o=e(51034),b=function(m,_){var L={};for(var t in m)Object.prototype.hasOwnProperty.call(m,t)&&_.indexOf(t)<0&&(L[t]=m[t]);if(m!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,t=Object.getOwnPropertySymbols(m);i<t.length;i++)_.indexOf(t[i])<0&&Object.prototype.propertyIsEnumerable.call(m,t[i])&&(L[t[i]]=m[t[i]]);return L},n="SECRET_COMBOBOX_MODE_DO_NOT_USE",M=function(_,L){var t,i=_.prefixCls,T=_.bordered,j=T===void 0?!0:T,w=_.className,W=_.getPopupContainer,Z=_.dropdownClassName,Q=_.popupClassName,C=_.listHeight,z=C===void 0?256:C,R=_.placement,q=_.listItemHeight,F=q===void 0?24:q,N=_.size,x=_.disabled,V=_.notFoundContent,oe=_.status,U=_.showArrow,H=b(_,["prefixCls","bordered","className","getPopupContainer","dropdownClassName","popupClassName","listHeight","placement","listItemHeight","size","disabled","notFoundContent","status","showArrow"]),G=p.useContext(D.E_),re=G.getPopupContainer,le=G.getPrefixCls,se=G.renderEmpty,X=G.direction,ue=G.virtual,Oe=G.dropdownMatchSelectWidth,ie=p.useContext(f.Z),S=le("select",i),de=le(),me=(0,o.ri)(S,X),ce=me.compactSize,De=me.compactItemClassnames,J=p.useMemo(function(){var y=H.mode;if(y!=="combobox")return y===n?"combobox":y},[H.mode]),ee=J==="multiple"||J==="tags",te=U!==void 0?U:H.loading||!(ee||J==="combobox"),ne=(0,p.useContext)(A.aM),Pe=ne.status,Y=ne.hasFeedback,ge=ne.isFormItemInput,Ee=ne.feedbackIcon,ve=(0,h.F)(Pe,oe),k;V!==void 0?k=V:J==="combobox"?k=null:k=(se||P.Z)("Select");var _e=(0,g.Z)((0,E.Z)((0,E.Z)({},H),{multiple:ee,hasFeedback:Y,feedbackIcon:Ee,showArrow:te,prefixCls:S})),pe=_e.suffixIcon,fe=_e.itemIcon,Ce=_e.removeIcon,Be=_e.clearIcon,Le=(0,$.Z)(H,["suffixIcon","itemIcon"]),Ie=s()(Q||Z,(0,B.Z)({},"".concat(S,"-dropdown-").concat(X),X==="rtl")),he=ce||N||ie,Me=p.useContext(d.Z),c=x!=null?x:Me,r=s()((t={},(0,B.Z)(t,"".concat(S,"-lg"),he==="large"),(0,B.Z)(t,"".concat(S,"-sm"),he==="small"),(0,B.Z)(t,"".concat(S,"-rtl"),X==="rtl"),(0,B.Z)(t,"".concat(S,"-borderless"),!j),(0,B.Z)(t,"".concat(S,"-in-form-item"),ge),t),(0,h.Z)(S,ve,Y),De,w),O=function(){return R!==void 0?R:X==="rtl"?"bottomRight":"bottomLeft"};return p.createElement(l.ZP,(0,E.Z)({ref:L,virtual:ue,dropdownMatchSelectWidth:Oe},Le,{transitionName:(0,u.mL)(de,(0,u.q0)(R),H.transitionName),listHeight:z,listItemHeight:F,mode:J,prefixCls:S,placement:O(),direction:X,inputIcon:pe,menuItemSelectedIcon:fe,removeIcon:Ce,clearIcon:Be,notFoundContent:k,className:r,getPopupContainer:W||re,dropdownClassName:Ie,showArrow:Y||U,disabled:c}))},a=p.forwardRef(M);a.SECRET_COMBOBOX_MODE_DO_NOT_USE=n,a.Option=l.Wx,a.OptGroup=l.Xo,I.Z=a}}]);
